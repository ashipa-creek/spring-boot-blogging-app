<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Create Post</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.ckeditor.com/ckeditor5/39.0.1/classic/ckeditor.js"></script>

<style>
* {
  box-sizing: border-box;
  font-family: 'Inter', sans-serif;
}

body {
  background: linear-gradient(135deg,#eef2ff,#dbeafe);
  padding: 60px 20px;
}

/* TITLE */
h2 {
  text-align: center;
  font-weight: 700;
  color: #1e3a8a;
  margin-bottom: 40px;
}

/* CARD */
.editor-card {
  background: rgba(255,255,255,0.85);
  backdrop-filter: blur(12px);
  max-width: 900px;
  margin: auto;
  padding: 45px;
  border-radius: 20px;
  box-shadow: 0 20px 40px rgba(37,99,235,0.2);
}

/* LABEL */
label {
  font-weight: 600;
  margin-top: 24px;
  display: block;
  color: #1e3a8a;
  font-size: 14px;
}

/* INPUT */
input[type="text"],
textarea {
  width: 100%;
  padding: 14px 16px;
  margin-top: 8px;
  border-radius: 12px;
  border: 1px solid #c7d2fe;
  font-size: 14px;
  background: #eff6ff;
  transition: 0.3s ease;
}

input:focus,
textarea:focus {
  outline: none;
  border-color: #2563eb;
  background: #ffffff;
  box-shadow: 0 0 0 3px rgba(37,99,235,0.2);
}

/* CKEDITOR */
.ck-editor__editable {
  min-height: 320px;
  background: #eff6ff !important;
  border-radius: 12px;
}

/* ACTIONS */
.actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 40px;
}

/* BUTTON */
.btn-primary {
  background: linear-gradient(135deg,#2563eb,#1e3a8a);
  border: none;
  padding: 12px 34px;
  font-size: 14px;
  font-weight: 600;
  border-radius: 999px;
  color: white;
  cursor: pointer;
  box-shadow: 0 8px 20px rgba(37,99,235,0.4);
  transition: 0.3s ease;
}

.btn-primary:hover {
  transform: scale(1.05);
  background: linear-gradient(135deg,#1e40af,#1e3a8a);
}

/* BACK */
.back-link a {
  color: #2563eb;
  font-weight: 600;
  font-size: 14px;
  text-decoration: none;
}

.back-link a:hover {
  text-decoration: underline;
}
</style>
</head>

<body>

<h2>✍️ Create Blog Post</h2>

<div class="editor-card">
  <form th:action="@{/create}" th:object="${post}" method="post" id="createPostForm">

    <label for="title">Title</label>
    <input type="text" id="title" th:field="*{title}" placeholder="Enter post title" required>

    <label for="description">Short Description</label>
    <input type="text" id="description" th:field="*{description}" placeholder="Enter post short description" required>

    <label for="content">Content</label>
    <textarea id="content" th:field="*{content}" placeholder="Write your post..."></textarea>

    <div class="actions">
      <div class="back-link">
        <a th:href="@{/dashboard}">← Back to Dashboard</a>
      </div>

      <button type="submit" class="btn-primary">
        Publish Post
      </button>
    </div>
  </form>
</div>

<script>
let editorInstance;

document.addEventListener('DOMContentLoaded', () => {
  ClassicEditor
    .create(document.querySelector('#content'))
    .then(editor => {
      editorInstance = editor;
    })
    .catch(error => console.error(error));

  document.getElementById('createPostForm').addEventListener('submit', function (e) {
    if (editorInstance) {
      const contentData = editorInstance.getData().trim();
      if (!contentData) {
        alert("Content is required.");
        e.preventDefault();
      }
      document.querySelector('#content').value = contentData;
    }
  });
});
</script>

</body>
</html>
